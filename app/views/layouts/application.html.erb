<!doctype html>
<html lang="en">
<head>
  <title><%= yield :title %></title>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
   <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' />
  <meta name="author" content="Philip Davies - SonicTexture.co.uk">
  <meta name="description" content="<%= yield :meta_description %>"/>

  <%= action_cable_meta_tag %>

  <%= stylesheet_link_tag    'application', media: 'all' %>
  <%= javascript_include_tag 'application' %>

  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <!--[if lt IE 9]>
  <script
      src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <script
      src="//cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"></script>
  <script
      src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.js"></script>
  <![endif]-->
</head>

  <body class="<%= yield :pclass %>">
      
    <%= render 'layouts/nav/header'%>
    
    <%= render 'layouts/google_analytics' %>
    
    <%= render 'layouts/flash' %>
    
    <% if (current_page?(controller: 'devise/sessions', action: 'new') || current_page?(controller:'devise/registrations', action: 'new') ) && !signed_in? %>

      <%= yield %>
      
    <% elsif signed_in? %>
      <h1>Sign In</h1>
    
    <% else %>
      <%= yield %>
    <% end %>
  
  <%= render 'layouts/nav/footer' %>
  
  <!-- closing div required for footer to be included everywhere -->
  </div>
  <%= render 'layouts/debug' %>
    
</body>
  <script>hljs.initHighlightingOnLoad();</script>

</html>
